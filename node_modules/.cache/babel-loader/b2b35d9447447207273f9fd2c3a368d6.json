{"ast":null,"code":"var _jsxFileName = \"/Users/zhangquan/url-shortner-js/urlShortener/src/components/Home.js\";\nimport React, { Component } from 'react';\nimport { Button } from 'react-bootstrap';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { createShortUrl, getAllUrls } from './Api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst isUrl = require(\"is-valid-http-url\");\n\nclass Home extends Component {\n  constructor() {\n    super();\n    this.state = {\n      longUrl: \"\",\n      urls: [],\n      active_button: false,\n      valid_url: false\n    };\n    this.handleUserInput = this.handleUserInput.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    getAllUrls().then(res => {\n      console.log(res);\n      this.setState({\n        urls: res.data\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.setState({\n      longUrl: \"\"\n    });\n  }\n\n  componentDidUpdate() {\n    getAllUrls().then(res => {\n      console.log(res);\n      this.setState({\n        urls: res.data\n      });\n    });\n  }\n\n  handleUserInput(e) {\n    var longUrl = e.target.value;\n    longUrl = longUrl.trim();\n    console.log(longUrl);\n    console.log(isUrl(longUrl));\n\n    if (isUrl(longUrl)) {\n      this.setState({\n        longUrl,\n        active_button: true,\n        valid_url: true\n      });\n    } else {\n      this.setState({\n        longUrl,\n        active_button: false,\n        valid_url: false\n      });\n    }\n  }\n\n  handleSubmit(e) {\n    let reqObj = {\n      longUrl: this.state.longUrl\n    };\n    createShortUrl(reqObj).then(res => {\n      this.setState({\n        longUrl: this.state.longUrl,\n        shortUrl: res.data.shortUrl\n      });\n    });\n  }\n\n  render() {\n    console.log(this.state.urls);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rootContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Rethink URL Shortener\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"formContainer\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"Enter Original URL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 83,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"long-url-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"url\",\n                      className: `\n                        ${this.state.valid_url ? 'form-control valid' : 'form-control'}\n                        `,\n                      onChange: this.handleUserInput.bind(this),\n                      value: this.state.longUrl,\n                      placeholder: \"Enter Link\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 88,\n                      columnNumber: 23\n                    }, this), \" \\xA0\\xA0\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      type: \"button\",\n                      className: \"button\",\n                      disabled: !this.state.active_button,\n                      onClick: this.handleSubmit,\n                      children: \"Shrink\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 98,\n                      columnNumber: 21\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"Your Short URL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    refs: \"a\",\n                    href: this.state.shortUrl,\n                    children: this.state.shortUrl\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 19\n                  }, this), \" \\xA0\\xA0\", /*#__PURE__*/_jsxDEV(CopyToClipboard, {\n                    text: this.state.shortUrl,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      type: \"button\",\n                      className: \"button\",\n                      children: \"Copy Link\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 107,\n                      columnNumber: 21\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lower\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lower-header\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Recent 5 Shortened URLs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tableContainer table-responsive-sm\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-bordered table-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"thead\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"S.No.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Long URL\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Short URL\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: this.state.urls.map((url, index) => {\n                var longUrl = url.longUrl.toString();\n                longUrl = longUrl.length > 100 ? longUrl.substring(0, 100) + \"...\" : longUrl;\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      backgroundColor: 'white'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      refs: \"a\",\n                      href: url.longUrl,\n                      children: longUrl\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 140,\n                      columnNumber: 23\n                    }, this), \" \\xA0\\xA0\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      backgroundColor: 'white'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      refs: \"a\",\n                      href: url.shortUrl,\n                      children: url.shortUrl\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 23\n                    }, this), \" \\xA0\\xA0\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 21\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 19\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/zhangquan/url-shortner-js/urlShortener/src/components/Home.js"],"names":["React","Component","Button","CopyToClipboard","createShortUrl","getAllUrls","isUrl","require","Home","constructor","state","longUrl","urls","active_button","valid_url","handleUserInput","bind","handleSubmit","componentDidMount","then","res","console","log","setState","data","componentWillUnmount","componentDidUpdate","e","target","value","trim","reqObj","shortUrl","render","map","url","index","toString","length","substring","backgroundColor"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport { Button } from 'react-bootstrap'\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { createShortUrl, getAllUrls } from './Api'; \nconst isUrl = require(\"is-valid-http-url\");\nclass Home extends Component {\n  constructor() {\n    super();\n\n    this.state = ({\n      longUrl: \"\",\n      urls: [],\n      active_button : false,\n      valid_url:false\n    })\n    this.handleUserInput = this.handleUserInput.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  componentDidMount() {\n    getAllUrls().then(res => {\n      console.log(res)\n      this.setState({\n        urls: res.data\n      })\n    })\n\n  }\n  componentWillUnmount() {\n    this.setState({\n      longUrl: \"\"\n    })\n  }\n  componentDidUpdate(){\n    getAllUrls().then(res => {\n      console.log(res)\n      this.setState({\n        urls: res.data\n      })\n    })\n\n  }\n  handleUserInput(e) {\n    var longUrl=e.target.value;\n    longUrl=longUrl.trim();\n    console.log(longUrl)\n    console.log(isUrl(longUrl))\n    if(isUrl(longUrl)) {\n      this.setState({ longUrl, active_button:true, valid_url:true });\n    }else{\n      this.setState({longUrl,active_button:false,valid_url:false})\n    }\n  }\n\n  handleSubmit(e) {\n    let reqObj = {\n      longUrl: this.state.longUrl\n    };\n    createShortUrl(reqObj)\n\n      .then(res => {\n        this.setState({\n          longUrl: this.state.longUrl,\n          shortUrl: res.data.shortUrl\n        });\n      })\n\n  }\n  render() {\n    console.log(this.state.urls)\n    return (\n      <div className=\"rootContainer\">\n      <div className=\"upper\">\n        <div className=\"header\">\n          <h1>Rethink URL Shortener</h1>\n        </div>\n        <div >\n          <div >\n            <form >\n              <div className=\"formContainer\">\n                <div>\n\n                  <h5>Enter Original URL</h5>\n                </div>\n                <div className=\"input\">\n                  <div className=\"long-url-input\"> \n                  \n                      <input type='url' className={\n                        `\n                        ${this.state.valid_url ? 'form-control valid':'form-control'}\n                        `\n                      }\n                  \n                       onChange={this.handleUserInput.bind(this)} value={this.state.longUrl} placeholder='Enter Link' /> &nbsp;&nbsp;\n                   \n                  </div>\n                  <div>\n                    <Button type=\"button\" className=\"button\" disabled={!this.state.active_button} onClick={this.handleSubmit}>Shrink</Button>\n                  </div>\n                </div>\n                <div >\n                  <h5>Your Short URL</h5>\n                  <a target=\"_blank\" rel=\"noopener noreferrer\" refs=\"a\" href={this.state.shortUrl}>\n                    {this.state.shortUrl}\n                  </a> &nbsp;&nbsp;\n                  <CopyToClipboard text={this.state.shortUrl}>\n                    <Button type=\"button\" className=\"button\">Copy Link</Button>\n                  </CopyToClipboard>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n        </div>\n        <div className=\"lower\">\n        <div className=\"lower-header\">\n          <h2>Recent 5 Shortened URLs</h2>\n        </div>\n        <div className=\"tableContainer table-responsive-sm\">\n          <table className=\"table table-bordered table-sm\">\n            <thead className=\"thead\">\n              <tr>\n                <th >S.No.</th>\n                <th >Long URL</th>\n                <th>Short URL</th>\n\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.urls.map((url, index) => {\n                var longUrl = url.longUrl.toString()\n                longUrl = longUrl.length > 100 ? longUrl.substring(0, 100) + \"...\" : longUrl;\n\n                return (\n                  <tr key={index}>\n                    <td>\n                      {index + 1}\n                    </td>\n                    <td style={{ backgroundColor: 'white' }}>\n                      <a target=\"_blank\" rel=\"noopener noreferrer\" refs=\"a\" href={url.longUrl}>\n                        {\n                          longUrl\n\n\n                        }\n                      </a> &nbsp;&nbsp;\n\n                  </td>\n                    <td style={{ backgroundColor: 'white' }}>\n\n                      <a target=\"_blank\" rel=\"noopener noreferrer\" refs=\"a\" href={url.shortUrl}>\n                        {url.shortUrl}\n                      </a> &nbsp;&nbsp;\n                  </td>\n                    \n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n</div>\n    );\n  }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}